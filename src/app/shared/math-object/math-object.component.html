<div *ngIf="context" class="math-object-container flex-row flex-align-center" [ngStyle]="getCustomStyles()">
  <div [ngSwitch]="mathObjectType" class="flex-row flex-align-center">

    <!-- RATIONAL -->
    <div *ngSwitchCase="'Rational'" class="flex-row flex-align-center">
      <div *ngIf="!isPositive(mathObject)">&nbsp;&nbsp;-&nbsp;&nbsp;</div>
      <div class="flex-column flex-align-center">
        <app-math-object [context]="getChildContext(0)" [changeContext]="changeContext"></app-math-object>
        <div class="rational-divider"></div>
        <app-math-object [context]="getChildContext(1)" [changeContext]="changeContext"></app-math-object>
      </div>
    </div>

    <!-- EXPRESSION -->
    <div *ngSwitchCase="'Expression'" class="flex-row flex-align-center">

      <div class="expression-sign flex-row" *ngIf="!isPositive(mathObject)">
        <div *ngIf="isFirstSibling && !inFirstTerm">&nbsp;&nbsp;</div>
        <div>-</div>
        <div *ngIf="isFirstSibling && !inFirstTerm && !isRoot">&nbsp;&nbsp;</div>
      </div>

      <div *ngIf="!isRoot || !isPositive(mathObject)">(&nbsp;</div>
      <ng-container *ngFor="let term of mathObject.children; let i = index">
        <div *ngIf="isPositive(term) && i !== 0">&nbsp;&nbsp;+&nbsp;&nbsp;</div>
        <app-math-object [context]="getChildContext(i)" [changeContext]="changeContext"></app-math-object>
      </ng-container>
      <div *ngIf="!isRoot || !isPositive(mathObject)">&nbsp;)</div>

    </div>

    <!-- TERM -->
    <div *ngSwitchCase="'Term'" class="flex-row flex-align-center">

      <!-- ADDITIONAL OPERATOR -->
      <div class="flex-row flex-align-center">
        <div *ngIf="additionalOpString">&nbsp;&nbsp;</div>
        <div>{{additionalOpString}}</div>
      </div>

      <ng-container *ngFor="let factor of mathObject.children; let i = index">
        <i *ngIf="i !== 0" class="fas fa-asterisk"></i>
        <app-math-object  [context]="getChildContext(i)" [changeContext]="changeContext"></app-math-object>
      </ng-container>
    </div>

    <div *ngSwitchCase="'Power'">{{this.context.target}}</div>

    <!-- BASIC FUNCTIONS -->
    <div *ngSwitchCase="'Function'" class="flex-row flex-align-center">
      <div class="flex-row" *ngIf="!isPositive(mathObject)">
        <div *ngIf="isFirstSibling && !inFirstTerm">&nbsp;&nbsp;</div>
        <div>-</div>
        <div *ngIf="isFirstSibling && !inFirstTerm && !isRoot">&nbsp;&nbsp;</div>
      </div>
      <div>{{functionStr}}</div>
      <div>[</div>

      <ng-container *ngFor="let factor of mathObject.children; let i = index">
        <div *ngIf="i !== 0">,&nbsp;</div>
        <app-math-object  [context]="getChildContext(i)" [changeContext]="changeContext"></app-math-object>
      </ng-container>

      <div>]</div>
    </div>

    <!-- LOG -->
    <div *ngSwitchCase="'Log'" class="flex-row flex-align-center">
      <div class="flex-row" *ngIf="!isPositive(mathObject)">
        <div *ngIf="isFirstSibling && !inFirstTerm">&nbsp;&nbsp;</div>
        <div>-</div>
        <div *ngIf="isFirstSibling && !inFirstTerm && !isRoot">&nbsp;&nbsp;</div>
      </div>
      <div>{{functionStr}}</div>
      <sub class="subscript">
        <app-math-object  [context]="getChildContext(1)" [changeContext]="changeContext"></app-math-object>
      </sub>
      <div>[</div>
      <app-math-object  [context]="getChildContext(0)" [changeContext]="changeContext"></app-math-object>
      <div>]</div>
    </div>
    
    <!-- BASIC FACTORS -->
    <div *ngSwitchDefault class="flex-row flex-align-center">
      <div *ngIf="isFirstSibling && !isPositive(mathObject); else positiveFactor" class="flex-row flex-align-center">
        <div *ngIf="!inFirstTerm">&nbsp;&nbsp;</div>
        <div>-</div>
        <div *ngIf="!inFirstTerm && !isRoot">&nbsp;&nbsp;</div>
        <div>{{flippedFactorStr}}</div>
      </div>
      <ng-template #positiveFactor>{{this.context.target}}</ng-template>
    </div>
  </div>
</div>
